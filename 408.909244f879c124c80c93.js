"use strict";(self.webpackChunkproduction_pr=self.webpackChunkproduction_pr||[]).push([[408],{9453:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var r=n(5893),i=n(7294),a=n(6419),o=n(3797);const c="_UP7ytME";var s=n(6974),l=n(2327),u=n(3593);var d=n(5937),v=n(6834),f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)},h=(0,i.memo)((function(e){var t=e.className,n=e.comment;return(0,r.jsx)("div",f({className:(0,o.A)("ghhhlnG6",{},[t])},{children:(0,r.jsxs)("div",f({className:"qzVX_xVY"},{children:[(0,r.jsxs)(d.FX,f({to:"".concat(v.h3.profile).concat(n.user.id),className:"zNcp35Cu"},{children:[!!n.user.avatarUrl&&(0,r.jsx)(d.qE,{src:n.user.avatarUrl,size:30,alt:"comment user avatar"},void 0),(0,r.jsx)(d.xv,{text:n.user.username},void 0)]}),void 0),(0,r.jsx)(d.xv,{text:n.text},void 0)]}),void 0)}),void 0)})),p=n(3913),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)},x=(0,i.memo)((function(e){var t=e.className,n=e.comments,i=e.isLoading,a=e.error,c=(0,l.$)(u.SW).t;return i?(0,r.jsx)(r.Fragment,{children:new Array(3).fill(0).map((function(e,t){return(0,r.jsx)("div",m({className:"gCxvjirx"},{children:(0,r.jsxs)("div",m({className:"KLj4nP7M"},{children:[(0,r.jsxs)("div",m({className:"DuQfVbFP"},{children:[(0,r.jsx)(d.Od,{width:30,height:30,borderRadius:"50%"},void 0),(0,r.jsx)(d.Od,{width:100,height:16},void 0)]}),void 0),(0,r.jsx)(d.Od,{width:"100%",height:50},void 0)]}),void 0)}),t)}))},void 0):(0,r.jsxs)("div",m({className:(0,o.A)("m8MO_cC4",{},[t])},{children:[(0,r.jsx)(d.xv,{title:c("comments")},void 0),(0,r.jsx)("div",m({className:"wxzDLJbQ"},{children:(null==n?void 0:n.length)?n.map((function(e){return(0,r.jsx)(h,{comment:e},e.id)})):a&&(0,r.jsx)(d.xv,{text:c("commentsNotFound"),align:p.PH.CENTER},void 0)}),void 0)]}),void 0)})),g=n(8022),y=n(7168),b=(0,y.hg)("pages/articleDetails/fetchCommentsByArticleId",(function(e,t){var n,r,i,a,o=t.extra,c=t.rejectWithValue;return n=void 0,r=void 0,a=function(){var t;return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e?[4,o.api.get("/comments",{params:{articleId:e,_expand:"user"}})]:[2,c("error")];case 1:if(!(t=n.sent()).data)throw new Error;return[2,t.data];case 2:return n.sent(),[2,c("error")];case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{s(a.next(e))}catch(e){t(e)}}function c(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,c)}s((a=a.apply(n,r||[])).next())}))})),w=(0,y.hg)("pages/articlesDetailsPage/fetchArticleRecommendations",(function(e,t){var n,r,i,a,o=t.extra,c=t.rejectWithValue;return n=void 0,r=void 0,a=function(){var e;return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,o.api.get("/articles",{params:{_limit:6}})];case 1:if(!(e=t.sent()).data)throw new Error;return[2,e.data];case 2:return t.sent(),[2,c("error")];case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{s(a.next(e))}catch(e){t(e)}}function c(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,c)}s((a=a.apply(n,r||[])).next())}))})),j=n(688),N=(0,y.hg)("pages/articleDetailsPage/addCommentForArticle",(function(e,t){return n=void 0,r=void 0,o=function(){var n,r,i,o,c,s,l;return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(u){switch(u.label){case 0:n=t.dispatch,r=t.rejectWithValue,i=t.getState,o=t.extra,u.label=1;case 1:return u.trys.push([1,3,,4]),c=(0,j.m5)(i()),s=(0,a.uN)(i()),c&&s?[4,o.api.post("/comments",{articleId:s,userId:c.id,text:e})]:[2,r("error")];case 2:if(!(l=u.sent()).data)throw new Error;return n(b(s)),[2,l.data];case 3:return u.sent(),[2,r("error")];case 4:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{s(o.next(e))}catch(e){t(e)}}function c(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,c)}s((o=o.apply(n,r||[])).next())}));var n,r,i,o})),k=(0,y.HF)({selectId:function(e){return e.id}}),P=(0,y.oM)({name:"articleDetailsComments",initialState:k.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:function(e){e.addCase(b.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(b.fulfilled,(function(e,t){var n=t.payload;e.isLoading=!1,k.setAll(e,n)})).addCase(b.rejected,(function(e,t){var n=t.payload;e.error=n,e.isLoading=!1}))}}),C=k.getSelectors((function(e){var t;return(null===(t=e.articleDetailsPage)||void 0===t?void 0:t.comments)||k.getInitialState()})),D=(P.actions,P.reducer),O=n(9704),S=function(e){var t,n;return null===(n=null===(t=e.articleDetailsPage)||void 0===t?void 0:t.comments)||void 0===n?void 0:n.isLoading},L=function(e){var t,n;return null===(n=null===(t=e.articleDetailsPage)||void 0===t?void 0:t.comments)||void 0===n?void 0:n.error},I=(n(960),(0,i.lazy)((function(){return n.e(385).then(n.bind(n,7385))}))),A=n(4215),E=(0,y.HF)({selectId:function(e){return e.id}}),F=(0,y.oM)({name:"articleDetailsPageRecommendationsSlice",initialState:E.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:function(e){e.addCase(w.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(w.fulfilled,(function(e,t){var n=t.payload;e.isLoading=!1,E.setAll(e,n)})).addCase(w.rejected,(function(e,t){var n=t.payload;e.error=n,e.isLoading=!1}))}}),z=E.getSelectors((function(e){var t;return(null===(t=e.articleDetailsPage)||void 0===t?void 0:t.recommendations)||E.getInitialState()})),W=(F.actions,F.reducer),G=function(e){var t,n;return null===(n=null===(t=e.articleDetailsPage)||void 0===t?void 0:t.recommendations)||void 0===n?void 0:n.isLoading},H=(0,n(7779).UY)({recommendations:W,comments:D}),M=(0,n(573).P1)(a.wq,j.m5,(function(e,t){return!(!e||!t)&&e.user.id===t.id})),R=n(9769);const T={articleDetailsPageHeader:"borzsIrg",backButton:"l36nWKzD"};var U=function(){return U=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},U.apply(this,arguments)},V=(0,i.memo)((function(e){var t=e.className,n=(0,l.$)(u.Gr).t,c=(0,s.s0)(),d=(0,O.v9)(a.wq),f=(0,O.v9)(M),h=(0,i.useCallback)((function(){c(v.h3.articles)}),[c]),p=(0,i.useCallback)((function(){c("".concat(v.h3.articleDetails).concat(null==d?void 0:d.id,"/edit"))}),[null==d?void 0:d.id,c]);return(0,r.jsxs)("div",U({className:(0,o.A)(T.articleDetailsPageHeader,{},[t])},{children:[(0,r.jsx)(R.zx,U({className:T.backButton,variant:R.Wu.OUTLINED,onClick:h},{children:n("goBack")}),void 0),f&&(0,r.jsx)(R.zx,U({className:T.edit,variant:R.Wu.OUTLINED,onClick:p},{children:n("edit")}),void 0)]}),void 0)})),_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_.apply(this,arguments)},q={articleDetailsPage:H},B=function(e){var t=e.className;(0,g.qV)(q);var n=(0,l.$)(u.Gr).t,v=(0,s.UO)().id,f=(0,O.I0)(),h=(0,O.v9)(C.selectAll),m=(0,O.v9)(S),y=(0,O.v9)(L),j=(0,O.v9)(z.selectAll),k=(0,O.v9)(G);(0,g.QY)((function(){f(w()),f(b(v))}),[]);var P=(0,i.useCallback)((function(e){f(N(e))}),[f]);return(0,r.jsx)(A.F,_({className:(0,o.A)(c,{},[t])},{children:(0,r.jsxs)("div",_({className:c},{children:[(0,r.jsx)(V,{},void 0),v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.D0,{id:v},void 0),(0,r.jsxs)("div",_({className:"Q0HYBkaw"},{children:[(0,r.jsx)(d.xv,{size:p.yH.L,title:n("recommended")},void 0),(0,r.jsx)(a.wD,{className:"j7ice3kY",articles:j,isLoading:k,view:a.dI.GRID,openInNewWindow:!0},void 0)]}),void 0),(0,r.jsx)(I,{onSendComment:P},void 0),(0,r.jsx)(x,{comments:h,isLoading:m,error:y},void 0)]},void 0):(0,r.jsx)("div",{children:n("articleNotFound")},void 0)]}),void 0)}),void 0)};const Y=(0,i.memo)(B)},960:(e,t,n)=>{n.d(t,{yc:()=>i,sM:()=>a});var r=(0,n(7168).oM)({name:"addCommentForm",initialState:{text:""},reducers:{setText:function(e,t){var n=t.payload;e.text=n}}}),i=r.actions,a=r.reducer}}]);