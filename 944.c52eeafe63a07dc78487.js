"use strict";(self.webpackChunkproduction_pr=self.webpackChunkproduction_pr||[]).push([[944],{9315:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var n=r(5893),a=r(7294),o=r(9704),i=r(6419),c=r(4215),l=r(3797),u=r(8022),s=function(e){var t;return(null===(t=e.articlesPage)||void 0===t?void 0:t.isLoading)||!1},d=function(e){var t;return(null===(t=e.articlesPage)||void 0===t?void 0:t.view)||i.dI.GRID},f=function(e){var t;return(null===(t=e.articlesPage)||void 0===t?void 0:t.page)||1},v=function(e){var t,r;return null!==(r=null===(t=e.articlesPage)||void 0===t?void 0:t.sort)&&void 0!==r?r:i.$B.CREATED_AT},p=function(e){var t,r;return null!==(r=null===(t=e.articlesPage)||void 0===t?void 0:t.order)&&void 0!==r?r:"asc"},h=function(e){var t,r;return null!==(r=null===(t=e.articlesPage)||void 0===t?void 0:t.search)&&void 0!==r?r:""},y=function(e){var t,r;return null!==(r=null===(t=e.articlesPage)||void 0===t?void 0:t.selectedType)&&void 0!==r?r:i.Iq.ALL},g=r(7168),b=r(3111),w=(0,g.hg)("pages/articlesPage/fetchArticleList",(function(e,t){var r,n,a,o,c=t.getState,l=t.extra,u=t.rejectWithValue;return r=void 0,n=void 0,o=function(){var e,t,r,n,a,o,s;return function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),e=f(c()),t=function(e){var t;return(null===(t=e.articlesPage)||void 0===t?void 0:t.limit)||8}(c()),r=v(c()),n=p(c()),a=h(c()),o=y(c()),g={sort:r,order:n,search:a,selectedType:o},window.history.pushState(null,"",function(e){var t=new URLSearchParams(window.location.search);return Object.entries(e).forEach((function(e){var r=e[0],n=e[1];void 0!==n&&t.set(r,n)})),"?".concat(t.toString())}(g)),[4,l.api.get("/articles",{params:{_expand:"user",_page:e,_limit:t,_sort:r,_order:n,q:a,type:o===i.Iq.ALL?void 0:o}})];case 1:if(!(s=d.sent()).data)throw new Error;return[2,s.data];case 2:return d.sent(),[2,u("error")];case 3:return[2]}var g}))},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{l(o.next(e))}catch(e){t(e)}}function c(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a((function(e){e(r)}))).then(i,c)}l((o=o.apply(r,n||[])).next())}))})),m=(0,g.HF)({selectId:function(e){return e.id}}),S=(0,g.oM)({name:"articlesPageSlice",initialState:m.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{},view:i.dI.GRID,page:1,hasMore:!0,sort:i.$B.CREATED_AT,order:"asc",search:"",selectedType:i.Iq.ALL,_inited:!1}),reducers:{setView:function(e,t){var r=t.payload;e.view=r,localStorage.setItem(b.ee,r)},setPage:function(e,t){var r=t.payload;e.page=r},setOrder:function(e,t){var r=t.payload;e.order=r},setSort:function(e,t){var r=t.payload;e.sort=r},setSearch:function(e,t){var r=t.payload;e.search=r},setSelectedType:function(e,t){var r=t.payload;e.selectedType=r},initState:function(e){var t=localStorage.getItem(b.ee);e.view=t,e.limit=t===i.dI.GRID?8:4,e._inited=!0}},extraReducers:function(e){e.addCase(w.pending,(function(e,t){e.error=void 0,e.isLoading=!0,t.meta.arg.replace&&m.removeAll(e)})).addCase(w.fulfilled,(function(e,t){e.isLoading=!1,e.hasMore=t.payload.length>=e.limit,t.meta.arg.replace?m.setAll(e,t.payload):m.addMany(e,t.payload)})).addCase(w.rejected,(function(e,t){var r=t.payload;e.error=r,e.isLoading=!1}))}}),k=m.getSelectors((function(e){return e.articlesPage||m.getInitialState()})),P=S.actions,x=S.reducer,C=(0,g.hg)("pages/articlesPage/initArticlesPage",(function(e,t){var r,n,a,o,i=t.getState,c=t.dispatch;return r=void 0,n=void 0,o=function(){var t;return function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(r){return t=function(e){var t;return null===(t=e.articlesPage)||void 0===t?void 0:t._inited}(i()),t||(e.forEach((function(e,t){switch(t){case"order":c(P.setOrder(e));break;case"sort":c(P.setSort(e));break;case"search":c(P.setSearch(e));break;case"selectedType":c(P.setSelectedType(e))}})),c(P.initState()),c(w({}))),[2]}))},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{l(o.next(e))}catch(e){t(e)}}function c(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a((function(e){e(r)}))).then(i,c)}l((o=o.apply(r,n||[])).next())}))})),T=(0,g.hg)("pages/articlesPage/fetchArticleListNextPage",(function(e,t){var r,n,a,o,i=t.getState,c=t.dispatch;return r=void 0,n=void 0,o=function(){var e,t,r;return function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(n){return e=function(e){var t;return null===(t=e.articlesPage)||void 0===t?void 0:t.hasMore}(i()),t=f(i()),r=s(i()),e&&!r&&(c(P.setPage(t+1)),c(w({}))),[2]}))},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{l(o.next(e))}catch(e){t(e)}}function c(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a((function(e){e(r)}))).then(i,c)}l((o=o.apply(r,n||[])).next())}))}));var j=r(2327),A=r(5937),L=r(3593);const I={articlesPageFilters:"ONtcivKc",sortBlock:"OyU_X5eE"};var O=function(){return O=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},O.apply(this,arguments)},_=(0,a.memo)((function(e){var t=e.className,r=(0,j.$)(L.F9).t,c=(0,u.TL)(),s=(0,o.v9)(d),f=(0,o.v9)(v),g=(0,o.v9)(p),b=(0,o.v9)(h),m=(0,o.v9)(y),S=(0,a.useCallback)((function(){c(P.setPage(1))}),[c]),k=(0,a.useCallback)((function(){S(),c(w({replace:!0}))}),[c,S]),x=(0,u.Nr)(k,500),C=(0,a.useCallback)((function(e){c(P.setView(e))}),[c]),T=(0,a.useCallback)((function(e){c(P.setOrder(e)),k()}),[c,k]),_=(0,a.useCallback)((function(e){c(P.setSort(e)),k()}),[c,k]),E=(0,a.useCallback)((function(e){c(P.setSearch(e)),x()}),[c,x]),N=(0,a.useCallback)((function(e){c(P.setSelectedType(e.key)),k()}),[c,k]);return(0,n.jsxs)("div",O({className:(0,l.A)(I.articlesPageFilters,{},[t])},{children:[(0,n.jsxs)("div",O({className:I.sortBlock},{children:[(0,n.jsx)(i.jo,{sort:f,order:g,onChangeOrder:T,onChangeSort:_},void 0),(0,n.jsx)(i.M8,{view:s,onChangeView:C},void 0)]}),void 0),(0,n.jsx)(A.Zb,O({className:I.searchWrapper},{children:(0,n.jsx)(A.II,{placeholder:r("search"),value:b,onChange:E},void 0)}),void 0),(0,n.jsx)(i.gU,{selectedType:m,onChangeType:N},void 0)]}),void 0)})),E=r(9711),N=function(){return N=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},N.apply(this,arguments)},R={articlesPage:x},G=function(e){var t=e.className;(0,u.qV)(R,{removeAfterUnmount:!1});var r=(0,u.TL)(),f=(0,o.v9)(k.selectAll),v=(0,o.v9)(s),p=(0,o.v9)(d),h=(0,E.lr)()[0];(0,u.QY)((function(){r(C(h))}),[]);var y=(0,a.useCallback)((function(){r(T())}),[r]);return(0,n.jsxs)(c.F,N({className:(0,l.A)("P0AGARUu",{},[t]),onScrollEnd:y},{children:[(0,n.jsx)(_,{},void 0),(0,n.jsx)(i.wD,{articles:f,view:p,isLoading:v},void 0)]}),void 0)};const D=(0,a.memo)(G)}}]);